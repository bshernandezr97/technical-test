(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{174:function(e,t,n){},175:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(22),i=n.n(c),r=n(7),s=n(27),o=n(62),l=n(33),u=n(3),f="[clasification] add",j="[clasification] load",b="[clasification] update",d="[clasification] delete",m="[clasification] setActive",O="[clasification] clearActive",p="[movie] add",h="[movie] load",v="[movie] update",x="[movie] delete",y="[movie] setActive",_="[movie] clearActive",g="[ui] showLoading",N="[ui] hideLoading",w="[ui] showClassificationModal",C="[ui] hideClassificationModal",k="[ui] showMovieModal",E="[ui] hideMovieModal",I={clasifications:[],active:null},M={movies:[],active:null},S={loading:!1,movieModal:!1,classificationModal:!1},T="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,A=Object(s.b)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{loading:!0};case N:return{loading:!1};case w:return Object(u.a)(Object(u.a)({},e),{},{classificationModal:!0});case C:return Object(u.a)(Object(u.a)({},e),{},{classificationModal:!1});case k:return Object(u.a)(Object(u.a)({},e),{},{movieModal:!0});case E:return Object(u.a)(Object(u.a)({},e),{},{movieModal:!1});default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)(Object(u.a)({},e),{},{movies:[t.payload].concat(Object(l.a)(e.movies))});case x:return Object(u.a)(Object(u.a)({},e),{},{movies:e.movies.filter((function(e){return e._id!==t.payload}))});case h:return console.log(t.payload),Object(u.a)(Object(u.a)({},e),{},{movies:t.payload});case v:return Object(u.a)(Object(u.a)({},e),{},{movies:e.movies.map((function(e){return e._id===t.payload._id?Object(u.a)({},t.payload):e}))});case y:return Object(u.a)(Object(u.a)({},e),{},{active:t.payload});case _:return Object(u.a)(Object(u.a)({},e),{},{active:null});default:return e}},clasification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(u.a)(Object(u.a)({},e),{},{clasifications:[t.payload].concat(Object(l.a)(e.clasifications))});case d:return Object(u.a)(Object(u.a)({},e),{},{clasifications:e.clasifications.filter((function(e){return e._id!==t.payload}))});case j:return console.log(t.payload),Object(u.a)(Object(u.a)({},e),{},{clasifications:t.payload});case b:return Object(u.a)(Object(u.a)({},e),{},{clasifications:e.clasifications.map((function(e){return e._id===t.payload._id?Object(u.a)({},t.payload):e}))});case m:return Object(u.a)(Object(u.a)({},e),{},{active:t.payload});case O:return Object(u.a)(Object(u.a)({},e),{},{active:null});default:return e}}}),D=Object(s.d)(A,T(Object(s.a)(o.a))),J=n(25),L=n(8),P=n(6),R=n.n(P),U=n(15),B=n(14),X=n(1),V=function(){return Object(X.jsxs)("div",{className:"nav__container",children:[Object(X.jsx)(J.b,{className:"nav__link ml-5",to:"/movies",children:" Movies "}),Object(X.jsx)(B.a,{className:"nav__brand ml-5",icon:U.b}),Object(X.jsx)(J.b,{className:"nav__link ml-5",to:"/clasification",children:" Classification "})]})},q=n(18),z=n(19),F=n.n(z),G={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},H=n(20),K=n.n(H),Q=n(9),W=n.n(Q),Y=n(17),Z=function(){return{type:g}},$=function(){return{type:N}},ee=function(){return{type:w}},te=function(){return{type:k}},ne="http://localhost:8081/api/movie",ae=function(e){return{type:p,payload:e}},ce=function(e){return{type:x,payload:e}},ie=function(e){return{type:v,payload:e}},re=function(){return function(){var e=Object(Y.a)(W.a.mark((function e(t){var n,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ne);case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?t((c=a.movies,{type:h,payload:c})):R.a.fire("Information",a.message,"error");case 7:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()},se="http://localhost:8081/api/clasification",oe=function(e){return{type:f,payload:e}},le=function(e){return{type:d,payload:e}},ue=function(e){return{type:b,payload:e}};F.a.setAppElement("#root");var fe=function(){var e=Object(a.useState)(""),t=Object(q.a)(e,2),n=t[0],c=t[1],i=Object(r.c)((function(e){return e.ui})).classificationModal,s=Object(r.c)((function(e){return e.clasification})).active,o=Object(a.useRef)(!1),l=Object(r.b)(),f=function(){return!K.a.isEmpty(n)||(R.a.fire("Information","Name cannot be empty","error"),!1)},j=function(){l({type:C}),l({type:O})};return Object(a.useEffect)((function(){s&&!o.current&&(o.current=!0,c(s.name))}),[s]),Object(X.jsxs)(F.a,{isOpen:i,style:G,children:[Object(X.jsx)("button",{className:"btn btn-danger btn-close-modal",onClick:j,children:"Close"}),Object(X.jsx)("div",{className:"form__title mb-5",children:"Classification"}),Object(X.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),f()&&(l(s?(t=Object(u.a)(Object(u.a)({},s),{},{name:n}),function(){var e=Object(Y.a)(W.a.mark((function e(n){var a,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Z()),e.next=3,fetch("".concat(se,"/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,n($()),c.ok?(n(ue(c.clasification)),n(re()),R.a.fire("Information","Classification updated successfully","success")):R.a.fire("Information",c.message,"error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(n){var a,c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Z()),t.next=3,fetch(se,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 3:return a=t.sent,t.next=6,a.json();case 6:c=t.sent,n($()),c.ok?(n(oe(c.clasification)),R.a.fire("Information","Classification added successfully","success")):R.a.fire("Information",c.message,"error");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({name:n})),c(""),j())},className:"form__app",children:[Object(X.jsx)("label",{children:"Name:"}),Object(X.jsx)("input",{value:n,onChange:function(e){c(e.target.value)},className:"mb-5"}),Object(X.jsx)("button",{className:"btn btn-success mt-5",children:"Save"})]})]})},je=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.clasification})).clasifications,n=function(t){e(function(e){return{type:m,payload:e}}(t)),e(ee())},a=function(t){e(function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(n){var a,c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Z()),t.next=3,fetch("".concat(se,"/").concat(e),{method:"DELETE"});case 3:return a=t.sent,t.next=6,a.json();case 6:c=t.sent,n($()),c.ok?(n(le(e)),n(re()),R.a.fire("Information","Classification deleted successfully","success")):R.a.fire("Information",c.message,"error");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},c=t.map((function(e){return Object(X.jsxs)("tr",{children:[Object(X.jsx)("td",{children:e.name}),Object(X.jsxs)("td",{children:[Object(X.jsx)(B.a,{onClick:function(){return n(e)},className:"table__action-primary",icon:U.a}),Object(X.jsx)(B.a,{onClick:function(){return a(e._id)},className:"table__action-danger ml-1",icon:U.d})]})]},e._id)}));return Object(X.jsxs)("div",{className:"page__table-container",children:[Object(X.jsxs)("table",{className:"table__app",children:[Object(X.jsx)("thead",{children:Object(X.jsxs)("tr",{children:[Object(X.jsx)("th",{children:"Name"}),Object(X.jsx)("th",{children:"Actions"})]})}),Object(X.jsx)("tbody",{children:c})]}),0===t.length&&Object(X.jsx)("div",{className:"table__empty-message",children:" There are not any classification, you can add one with the bottow below "})]})},be=function(){var e=Object(r.b)();return Object(X.jsxs)("div",{children:[Object(X.jsx)(fe,{}),Object(X.jsxs)("div",{className:"page__container",children:[Object(X.jsx)(je,{}),Object(X.jsxs)("button",{onClick:function(){e(ee())},className:"btn btn-primary mt-5",children:[Object(X.jsx)(B.a,{className:"mr-5",icon:U.c}),"Add Classification"]})]})]})},de=n(63),me=n(32),Oe=["clasification"];F.a.setAppElement("#root");var pe={name:"",director:"",clasification:""},he=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(q.a)(t,2),c=n[0],i=n[1];return[c,function(e){var t=e.target;i(Object(u.a)(Object(u.a)({},c),{},Object(me.a)({},t.name,t.value)))},function(e){i(e)},function(){i(e)}]}(pe),t=Object(q.a)(e,3),n=t[0],c=t[1],i=t[2],s=n.name,o=n.director,l=n.clasification,f=Object(r.c)((function(e){return e.movies})).active,j=Object(a.useRef)(!1),b=Object(r.c)((function(e){return e.ui})).movieModal,d=Object(r.c)((function(e){return e.clasification})).clasifications,m=Object(r.b)(),O=function(){j.current=!1,m({type:E}),m({type:_})},p=function(){return K.a.isEmpty(s)?(R.a.fire("Information","Name cannot be empty","error"),!1):K.a.isEmpty(o)?(R.a.fire("Information","Director cannot be empty","error"),!1):!K.a.isEmpty(l)||(R.a.fire("Information","Classification cannot be empty, If there are not classification you can create one in classification menu","error"),!1)};return Object(a.useEffect)((function(){if(f&&!j.current){j.current=!0;var e=f.clasification,t=Object(de.a)(f,Oe);i(Object(u.a)(Object(u.a)({},t),{},{clasification:null===e||void 0===e?void 0:e._id}))}}),[f,i]),Object(X.jsxs)(F.a,{isOpen:b,style:G,children:[Object(X.jsx)("button",{className:"btn btn-danger btn-close-modal",onClick:O,children:"Close"}),Object(X.jsx)("div",{className:"form__title mb-5",children:"Movie"}),Object(X.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),p()&&(m(f?(t=n,function(){var e=Object(Y.a)(W.a.mark((function e(n,a){var c,i,r,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Z()),c=a().clasification.clasifications,i=c.find((function(e){return e._id===t.clasification})),e.next=5,fetch("".concat(ne,"/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:return r=e.sent,e.next=8,r.json();case 8:s=e.sent,n($()),s.ok?(n(ie(Object(u.a)(Object(u.a)({},s.movie),{},{clasification:i}))),R.a.fire("Information","Movie updated successfully","success")):R.a.fire("Information",s.message,"error");case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(n,a){var c,i,r,s;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Z()),c=a().clasification.clasifications,i=c.find((function(t){return t._id===e.clasification})),t.next=5,fetch(ne,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 5:return r=t.sent,t.next=8,r.json();case 8:s=t.sent,n($()),s.ok?(n(ae(Object(u.a)(Object(u.a)({},s.movie),{},{clasification:i}))),R.a.fire("Information","Movie added successfully","success")):R.a.fire("Information",s.message,"error");case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n)),i(pe),O())},className:"form__app",children:[Object(X.jsx)("label",{children:"Name:"}),Object(X.jsx)("input",{value:s,name:"name",onChange:c,className:"mb-5"}),Object(X.jsx)("label",{children:"Director:"}),Object(X.jsx)("input",{value:o,name:"director",onChange:c,className:"mb-5"}),Object(X.jsx)("label",{children:"Classification:"}),Object(X.jsxs)("select",{value:l,name:"clasification",onChange:c,className:"mb-5",children:[Object(X.jsx)("option",{}),d.map((function(e){return Object(X.jsx)("option",{value:e._id,children:e.name},e._id)}))]}),Object(X.jsx)("button",{className:"btn btn-success mt-5",children:"Save"})]})]})},ve=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.movies})).movies,n=function(t){e(function(e){return{type:y,payload:e}}(t)),e(te())},a=function(t){e(function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(n){var a,c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Z()),t.next=3,fetch("".concat(ne,"/").concat(e),{method:"DELETE"});case 3:return a=t.sent,t.next=6,a.json();case 6:c=t.sent,console.log(c),n($()),c.ok?(n(ce(e)),R.a.fire("Information","Movie deleted successfully","success")):R.a.fire("Information",c.message,"error");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},c=null===t||void 0===t?void 0:t.map((function(e){var t;return Object(X.jsxs)("tr",{children:[Object(X.jsx)("td",{children:e.name}),Object(X.jsx)("td",{children:e.director}),Object(X.jsx)("td",{children:null===(t=e.clasification)||void 0===t?void 0:t.name}),Object(X.jsxs)("td",{children:[Object(X.jsx)(B.a,{onClick:function(){return n(e)},className:"table__action-primary",icon:U.a}),Object(X.jsx)(B.a,{onClick:function(){return a(e._id)},className:"table__action-danger ml-1",icon:U.d})]})]},e._id)}));return Object(X.jsxs)("div",{className:"page__table-container",children:[Object(X.jsxs)("table",{className:"table__app",children:[Object(X.jsx)("thead",{children:Object(X.jsxs)("tr",{children:[Object(X.jsx)("th",{children:"Name"}),Object(X.jsx)("th",{children:"Director"}),Object(X.jsx)("th",{children:"Classification"}),Object(X.jsx)("th",{children:"Actions"})]})}),Object(X.jsx)("tbody",{children:c})]}),0===t.length&&Object(X.jsx)("div",{className:"table__empty-message",children:" There are not any movie, you can add one with the bottow below "})]})},xe=function(){var e=Object(r.b)();return Object(X.jsxs)("div",{children:[Object(X.jsx)(he,{}),Object(X.jsxs)("div",{className:"page__container",children:[Object(X.jsx)(ve,{}),Object(X.jsxs)("button",{onClick:function(){e(te())},className:"btn btn-primary mt-5",children:[Object(X.jsx)(B.a,{className:"mr-5",icon:U.c}),"Add Movie"]})]})]})},ye=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.ui})).loading;return Object(a.useEffect)((function(){e(function(){var e=Object(Y.a)(W.a.mark((function e(t){var n,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(se);case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,console.log(a.clasifications),a.ok?t((c=a.clasifications,{type:j,payload:c})):R.a.fire("Information",a.message,"error");case 8:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()),e(re())}),[e]),Object(a.useEffect)((function(){t&&R.a.showLoading(R.a.getDenyButton())}),[t]),Object(X.jsx)(J.a,{children:Object(X.jsxs)("div",{className:"container",children:[Object(X.jsx)(V,{}),Object(X.jsxs)(L.d,{children:[Object(X.jsx)(L.b,{exact:!0,path:"/movies",component:xe}),Object(X.jsx)(L.b,{exact:!0,path:"/clasification",component:be}),Object(X.jsx)(L.a,{to:"/movies"})]})]})})},_e=(n(174),function(){return Object(X.jsx)(r.a,{store:D,children:Object(X.jsx)(ye,{})})});i.a.render(Object(X.jsx)(_e,{}),document.getElementById("root"))}},[[175,1,2]]]);
//# sourceMappingURL=main.77bcc1cf.chunk.js.map